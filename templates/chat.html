{% extends "base.html" %}

{% block title %}Chat with {{ partner[1] }}{% endblock %}

{% block content %}
<div class="dashboard-container">
  <h2>Chat with {{ partner[1] }} {{ partner[2] }}</h2>

  <div style="max-height: 500px; overflow-y: auto; padding: 1rem; border: 1px solid #ddd; border-radius: 8px; background: #fdfdfd;">
    {% for msg in messages %}
      <div style="margin-bottom: 1rem; text-align: {{ 'right' if msg[0] == current_user_id else 'left' }};">
        <div style="display: inline-block; max-width: 70%; padding: 0.75rem 1rem; border-radius: 10px;
                    background-color: {{ '#e6f4f1' if msg[0] == current_user_id else '#f1f1f1' }};
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <p style="margin: 0;">{{ msg[1] }}</p>
          <small style="font-size: 0.7rem; color: #888;">{{ msg[2].strftime('%Y-%m-%d %H:%M') }}</small>
        </div>
      </div>
    {% endfor %}
  </div>

  <form method="POST" style="margin-top: 1rem;">
    <textarea name="message" required style="width: 100%; height: 60px; border-radius: 6px; padding: 0.75rem;"></textarea>
    <button type="submit">Send</button>
  </form>
</div>
{% endblock %}
